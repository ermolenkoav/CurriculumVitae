name: Compile and Release Latex  PDF

on:
  push:
    tags:
      - '*.*'
      - 'ver.*.*'

jobs:
  build_latex:
    runs-on: ubuntu-latest
    container:
      image: danteev/texlive:latest
    steps:
      - name: Set up Git repository
        uses: actions/checkout@v4.1.1

      - name: Compile LaTeX
        uses: dante-ev/latex-action@edge
        with:
          root_file: '*.tex'

      - name: Publish LaTeX
        run : |
          git config --global user.email "ermolenkoav@gmail.com"
          git config --global user.name "Alexey Ermolenko"
          git add -f $PWD/*.pdf
          git commit -m "WORKFLOW_COMMIT - Update PDFs [skip ci]"
          git push
